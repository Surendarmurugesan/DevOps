echo "*/3 * * * * root /etc/designer-scripts/data_status_check.sh" > /etc/cron.d/des_rsync_status_check

sudo /ofs-us-west-1/designer/completed_rsync.sh DAS-E4-USW9-DEVOPS E4-USW9-DEVOPS

echo "us-west:" >> sample




## Attempt 3
source="/ofs-us-west-1"
initial_rsync_check=`cat /mnt/ofs/initial_rsync_status | grep "${source}"`
if [ $? -ne 0 ] ; then
    while [ `ps -ef | grep [r]sync | grep "${source}" | grep -v concurrent_rsync.sh | wc -l` -ne 0 ]
    do
        echo "Waiting..."
        sleep ${sleeptime}
    done
    time="$(date --rfc-3339=sec)"
    echo ""${source}": done, rsync_completed_time: $time" >> /mnt/ofs/initial_rsync_status
fi


## Attempt 2
initial_rsync_check=`cat /home/ec2-user/initial_rsync_status | grep us-west-1`
if [ $? -ne 0 ] ; then
    while [ `ps -ef | grep [r]sync | grep /ofs-us-west-1 | grep -v concurrent_rsync.sh | wc -l` -ne 0 ]
    do
        echo "Waiting..."    
    done
    time="$(date --rfc-3339=sec)"
    echo "us-west-1: done, rsync_completed_time: $time" >> /home/ec2-user/initial_rsync_status
else
    echo "exit"
fi

## Attempt 1
initial_rsync_check=`cat /home/ec2-user/initial_rsync_status | grep us-west-1`
if [ $? -ne 0 ] ; then
    echo "true"
else
    echo "false"
fi